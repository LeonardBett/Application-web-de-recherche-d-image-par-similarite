import{a as d}from"./http-api-NiqjV3eZ.js";import{_ as w}from"./Image.vue_vue_type_script_setup_true_lang-Jv97zG_9.js";import{d as k,r as m,g as F,k as L,i as x,c as r,a as n,t as v,h as E,F as f,b as M,l as h,m as S,n as A,o as i}from"./index-D8KZwbid.js";const B={key:0},C=["id"],R={key:1},D={key:0},N={class:"similar-images-container"},b=k({__name:"QuizzImage",setup(V){const u=m([]),s=m(null),o=m([]),c=m(null),p=async()=>{try{if(u.value=await d.getImageList(),u.value.length>0){const e=Math.floor(Math.random()*u.value.length),a=u.value[e].id;s.value=a===0?1:a}}catch(e){console.error("Error fetching image list:",e)}},y=async e=>{try{o.value=await d.getSimilarImages(e),o.value=o.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),o.value=[]}},_=async e=>{try{c.value=await d.getImageFlou(e),I(e,c.value)}catch(a){console.error("Error fetching flou image:",a)}},I=(e,a)=>{const t=new FileReader;t.onload=()=>{const l=document.getElementById(`gallery-${e}`);l&&(l.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(a)};F(s,async e=>{e!==null?(await y(e),await _(e)):(o.value=[],c.value=null)});const g=L(()=>{if(!s.value)return[];const e=new Set([s.value,...o.value.map(t=>t.id)]);return Array.from(e).map(t=>u.value.find(l=>l.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return x(p),(e,a)=>{const t=A("router-link");return i(),r(f,null,[n("div",null,[a[1]||(a[1]=n("h3",null,"Random Image",-1)),s.value!==null?(i(),r("div",B,[n("p",null,"Image ID: "+v(s.value),1),n("figure",{id:"gallery-"+s.value},null,8,C)])):(i(),r("div",R,a[0]||(a[0]=[n("p",null,"Loading image...",-1)])))]),n("div",null,[g.value.length>0?(i(),r("div",D,[a[2]||(a[2]=n("h4",null,"Images",-1)),n("div",N,[(i(!0),r(f,null,M(g.value,l=>(i(),r("div",{key:l.id,class:"similar-image"},[h(t,{to:{name:"Result",params:{id:l.id===s.value?0:1}}},{default:S(()=>[h(w,{id:l.id},null,8,["id"])]),_:2},1032,["to"]),n("p",null,v(l.name),1)]))),128))])])):E("",!0)])],64)}}});export{b as default};
