import{a as v}from"./http-api-XlQ5B82Y.js";import{_ as F}from"./Image.vue_vue_type_script_setup_true_lang-BJ_d6tA1.js";import{d as x,r as c,g as A,k as B,i as D,c as o,a as l,l as g,m as f,n as Q,t as p,h as R,F as S,b as $,o as s,p as y}from"./index-DM_nWob9.js";const b={key:0},C={key:1},N={key:0},V=["id"],j={key:1},T={key:0},U={class:"similar-images-container"},G=x({__name:"QuizzImage",props:{id:{}},setup(h){const u=c([]),m=c(null),r=c([]),d=c(null),i=c(null),w=h,_=async()=>{try{if(u.value=await v.getImageList(),u.value.length>0){const a=Math.floor(Math.random()*u.value.length),e=u.value[a].id;m.value=e===0?1:e}}catch(a){console.error("Error fetching image list:",a)}},k=async a=>{try{r.value=await v.getSimilarImages(a),r.value=r.value.slice(0,3)}catch(e){console.error("Error fetching similar images:",e),r.value=[]}},M=async a=>{try{d.value=await v.getImageModif(a,1),i.value=a,E(a,d.value)}catch(e){console.error("Error fetching flou image:",e)}},z=(a,e)=>{const t=new FileReader;t.onload=()=>{const n=document.getElementById(`gallery-${a}`);n&&(n.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)},L=async a=>{try{d.value=await v.getImageModif(a,2),i.value=a,z(a,d.value)}catch(e){console.error("Error fetching zoom image:",e)}},E=(a,e)=>{const t=new FileReader;t.onload=()=>{const n=document.getElementById(`gallery-${a}`);n&&(n.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)};A(m,async a=>{a!==null?(await k(a),w.id==1?await M(a):await L(a)):(r.value=[],d.value=null,i.value=null)});const I=B(()=>{if(!m.value)return[];const a=new Set([m.value,...r.value.map(t=>t.id)]);return Array.from(a).map(t=>u.value.find(n=>n.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return D(_),(a,e)=>{const t=Q("router-link");return a.id===0?(s(),o("div",b,[e[3]||(e[3]=l("p",null,"Quel niveau va tu choisir cher joueur ?",-1)),l("button",null,[g(t,{to:"/QuizzImage/1"},{default:f(()=>e[0]||(e[0]=[y("Facile")])),_:1})]),l("button",null,[g(t,{to:"/QuizzImage/2"},{default:f(()=>e[1]||(e[1]=[y("Moyen")])),_:1})]),l("button",null,[g(t,{to:"/QuizzImage/3"},{default:f(()=>e[2]||(e[2]=[y("Dur")])),_:1})])])):(s(),o("div",C,[l("div",null,[e[5]||(e[5]=l("h3",null,"Modified Image",-1)),i.value!==null?(s(),o("div",N,[l("p",null,"Image ID: "+p(i.value),1),l("figure",{id:"gallery-"+i.value},null,8,V)])):(s(),o("div",j,e[4]||(e[4]=[l("p",null,"Loading image...",-1)])))]),l("div",null,[I.value.length>0?(s(),o("div",T,[e[6]||(e[6]=l("h4",null,"Images",-1)),l("div",U,[(s(!0),o(S,null,$(I.value,n=>(s(),o("div",{key:n.id,class:"similar-image"},[g(t,{to:{name:"Result",params:{id:n.id===m.value?0:1}}},{default:f(()=>[g(F,{id:n.id},null,8,["id"])]),_:2},1032,["to"]),l("p",null,p(n.name),1)]))),128))])])):R("",!0)])]))}}});export{G as default};
