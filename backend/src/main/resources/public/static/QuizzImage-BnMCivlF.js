import{a as g}from"./http-api-XlQ5B82Y.js";import{_ as x}from"./Image.vue_vue_type_script_setup_true_lang-C9PYU5Jg.js";import{d as F,r as d,g as A,k as B,i as R,c as s,a as n,t as h,h as S,F as y,b as $,l as p,m as C,n as D,o as i}from"./index-Njo3QrMN.js";const z={key:0},N=["id"],U={key:1},V={key:0},j={class:"similar-images-container"},b=F({__name:"QuizzImage",props:{id:{}},setup(I){const m=d([]),u=d(null),o=d([]),c=d(null),r=d(null),f=I,_=async()=>{try{if(m.value=await g.getImageList(),m.value.length>0){const e=Math.floor(Math.random()*m.value.length),a=m.value[e].id;u.value=a===0?1:a}}catch(e){console.error("Error fetching image list:",e)}},w=async e=>{try{o.value=await g.getSimilarImages(e),o.value=o.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),o.value=[]}},k=async e=>{try{c.value=await g.getImageModif(e,1),r.value=e,E(e,c.value)}catch(a){console.error("Error fetching flou image:",a)}},M=(e,a)=>{const t=new FileReader;t.onload=()=>{const l=document.getElementById(`gallery-${e}`);l&&(l.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(a)},L=async e=>{try{c.value=await g.getImageModif(e,2),r.value=e,M(e,c.value)}catch(a){console.error("Error fetching zoom image:",a)}},E=(e,a)=>{const t=new FileReader;t.onload=()=>{const l=document.getElementById(`gallery-${e}`);l&&(l.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(a)};A(u,async e=>{e!==null?(await w(e),f.id==1?await k(e):f.id==2&&await L(e)):(o.value=[],c.value=null,r.value=null)});const v=B(()=>{if(!u.value)return[];const e=new Set([u.value,...o.value.map(t=>t.id)]);return Array.from(e).map(t=>m.value.find(l=>l.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return R(_),(e,a)=>{const t=D("router-link");return i(),s(y,null,[n("div",null,[a[1]||(a[1]=n("h3",null,"Modified Image",-1)),r.value!==null?(i(),s("div",z,[n("p",null,"Image ID: "+h(r.value),1),n("figure",{id:"gallery-"+r.value},null,8,N)])):(i(),s("div",U,a[0]||(a[0]=[n("p",null,"Loading image...",-1)])))]),n("div",null,[v.value.length>0?(i(),s("div",V,[a[2]||(a[2]=n("h4",null,"Images",-1)),n("div",j,[(i(!0),s(y,null,$(v.value,l=>(i(),s("div",{key:l.id,class:"similar-image"},[p(t,{to:{name:"Result",params:{id:l.id===u.value?0:1}}},{default:C(()=>[p(x,{id:l.id},null,8,["id"])]),_:2},1032,["to"]),n("p",null,h(l.name),1)]))),128))])])):S("",!0)])],64)}}});export{b as default};
