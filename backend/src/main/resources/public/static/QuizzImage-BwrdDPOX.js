import{a as f}from"./http-api-XlQ5B82Y.js";import{_ as F}from"./Image.vue_vue_type_script_setup_true_lang-Be1OkNcA.js";import{d as b,r as c,g as A,k as B,i as R,c as l,h as w,a as n,l as g,m as v,n as S,t as k,F as _,b as $,e as D,o as s,p as y}from"./index-r___H1KH.js";const N={key:0},V={key:0},T=["id"],U={key:1},j={key:0},H={class:"similar-images-container"},q=b({__name:"QuizzImage",props:{id:{}},setup(z){const u=c([]),m=c(null),r=c([]),d=c(null),i=c(null),I=z,M=async()=>{try{if(u.value=await f.getImageList(),u.value.length>0){const a=Math.floor(Math.random()*u.value.length),e=u.value[a].id;m.value=e===0?1:e}}catch(a){console.error("Error fetching image list:",a)}},L=async a=>{try{r.value=await f.getSimilarImages(a),r.value=r.value.slice(0,3)}catch(e){console.error("Error fetching similar images:",e),r.value=[]}},Q=async a=>{try{d.value=await f.getImageModif(a,1),i.value=a,E(a,d.value)}catch(e){console.error("Error fetching flou image:",e)}},x=(a,e)=>{const t=new FileReader;t.onload=()=>{const o=document.getElementById(`gallery-${a}`);o&&(o.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)},C=async a=>{try{d.value=await f.getImageModif(a,2),i.value=a,x(a,d.value)}catch(e){console.error("Error fetching zoom image:",e)}},E=(a,e)=>{const t=new FileReader;t.onload=()=>{const o=document.getElementById(`gallery-${a}`);o&&(o.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)};A(m,async a=>{a!==null?(await L(a),I.id==1?await Q(a):I.id==2&&await C(a)):(r.value=[],d.value=null,i.value=null)});const h=B(()=>{if(!m.value)return[];const a=new Set([m.value,...r.value.map(t=>t.id)]);return Array.from(a).map(t=>u.value.find(o=>o.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});function p(){D.push({name:"Quizz"})}return R(M),(a,e)=>{const t=S("router-link");return s(),l(_,null,[a.id===0?(s(),l("div",N,[e[3]||(e[3]=n("p",null,"Ou tu peux retenter ta chance pour un bonus :",-1)),n("button",{onClick:p},[g(t,{to:"/ImageQuest"},{default:v(()=>e[0]||(e[0]=[y("Quizz niveau facile")])),_:1})]),n("button",{onClick:p},[g(t,{to:"/ImageQuest"},{default:v(()=>e[1]||(e[1]=[y("Quizz niveau moyen")])),_:1})]),n("button",{onClick:p},[g(t,{to:"/ImageQuest"},{default:v(()=>e[2]||(e[2]=[y("Quizz niveau dur")])),_:1})])])):w("",!0),n("div",null,[e[5]||(e[5]=n("h3",null,"Modified Image",-1)),i.value!==null?(s(),l("div",V,[n("p",null,"Image ID: "+k(i.value),1),n("figure",{id:"gallery-"+i.value},null,8,T)])):(s(),l("div",U,e[4]||(e[4]=[n("p",null,"Loading image...",-1)])))]),n("div",null,[h.value.length>0?(s(),l("div",j,[e[6]||(e[6]=n("h4",null,"Images",-1)),n("div",H,[(s(!0),l(_,null,$(h.value,o=>(s(),l("div",{key:o.id,class:"similar-image"},[g(t,{to:{name:"Result",params:{id:o.id===m.value?0:1}}},{default:v(()=>[g(F,{id:o.id},null,8,["id"])]),_:2},1032,["to"]),n("p",null,k(o.name),1)]))),128))])])):w("",!0)])],64)}}});export{q as default};
