import{a as d}from"./http-api-DGFSZnvK.js";import{_}from"./Image.vue_vue_type_script_setup_true_lang-CWy3DyJ2.js";import{d as I,r as u,g as y,k,i as w,c as r,a as n,t as g,h as L,F as v,b as S,l as f,m as x,n as C,o as i}from"./index-Db1BkdjY.js";const M={key:0},A=["src"],B={key:1},E={key:0},N={class:"similar-images-container"},R=I({__name:"QuizzImage",setup(V){const m=u([]),a=u(null),s=u([]),p=async()=>{try{if(m.value=await d.getImageList(),m.value.length>0){const e=Math.floor(Math.random()*m.value.length);a.value=m.value[e].id,a.value==0&&(a.value=1)}}catch(e){console.error("Error fetching image list:",e)}},h=async e=>{try{s.value=await d.getSimilarImages(e),s.value=s.value.slice(0,3)}catch(t){console.error("Error fetching similar images:",t),s.value=[]}};y(a,async e=>{e!==null?await h(e):s.value=[]});const c=k(()=>{if(!a.value)return[];const e=new Set([a.value,...s.value.map(l=>l.id)]);return Array.from(e).map(l=>m.value.find(o=>o.id===l)||{id:l,name:"Unknown"}).sort(()=>Math.random()-.5)});return w(p),(e,t)=>{const l=C("router-link");return i(),r(v,null,[n("div",null,[t[1]||(t[1]=n("h3",null,"Random Image",-1)),a.value!==null?(i(),r("div",M,[n("p",null,"Image ID: "+g(a.value),1),n("img",{src:`http://localhost:8080/images/${a.value}`},null,8,A)])):(i(),r("div",B,t[0]||(t[0]=[n("p",null,"Loading image...",-1)])))]),n("div",null,[c.value.length>0?(i(),r("div",E,[t[2]||(t[2]=n("h4",null,"Images",-1)),n("div",N,[(i(!0),r(v,null,S(c.value,o=>(i(),r("div",{key:o.id,class:"similar-image"},[f(l,{to:{name:"Result",params:{id:o.id===a.value?0:1}}},{default:x(()=>[f(_,{id:o.id},null,8,["id"])]),_:2},1032,["to"]),n("p",null,g(o.name),1)]))),128))])])):L("",!0)])],64)}}});export{R as default};
