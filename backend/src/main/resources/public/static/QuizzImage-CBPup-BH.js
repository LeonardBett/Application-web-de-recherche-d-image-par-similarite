import{a as f}from"./http-api-XlQ5B82Y.js";import{_ as x}from"./Image.vue_vue_type_script_setup_true_lang-D4Eet_d8.js";import{d as A,r as c,g as B,k as D,i as Q,c as o,a as n,l as g,m as v,n as R,t as h,h as S,F as w,b as $,o as s,p as y}from"./index-Dw80IvBH.js";const b={key:0},C={key:1},N={key:0},V=["id"],j={key:1},T={key:0},U={class:"similar-images-container"},G=A({__name:"QuizzImage",props:{id:{}},setup(_){const u=c([]),m=c(null),r=c([]),d=c(null),i=c(null),I=_,k=async()=>{try{if(u.value=await f.getImageList(),u.value.length>0){const a=Math.floor(Math.random()*u.value.length),e=u.value[a].id;m.value=e===0?1:e}}catch(a){console.error("Error fetching image list:",a)}},M=async a=>{try{r.value=await f.getSimilarImages(a),r.value=r.value.slice(0,3)}catch(e){console.error("Error fetching similar images:",e),r.value=[]}},z=async a=>{try{d.value=await f.getImageModif(a,1),i.value=a,F(a,d.value)}catch(e){console.error("Error fetching flou image:",e)}},L=(a,e)=>{const t=new FileReader;t.onload=()=>{const l=document.getElementById(`gallery-${a}`);l&&(l.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)},E=async a=>{try{d.value=await f.getImageModif(a,2),i.value=a,L(a,d.value)}catch(e){console.error("Error fetching zoom image:",e)}},F=(a,e)=>{const t=new FileReader;t.onload=()=>{const l=document.getElementById(`gallery-${a}`);l&&(l.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)};B(m,async a=>{a!==null?(await M(a),I.id==1?await z(a):I.id==2&&await E(a)):(r.value=[],d.value=null,i.value=null)});const p=D(()=>{if(!m.value)return[];const a=new Set([m.value,...r.value.map(t=>t.id)]);return Array.from(a).map(t=>u.value.find(l=>l.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return Q(k),(a,e)=>{const t=R("router-link");return s(),o(w,null,[a.id===0?(s(),o("div",b,[e[3]||(e[3]=n("p",null,"Quel niveau va tu choisir cher joueur ?",-1)),n("button",null,[g(t,{to:"/QuizzImage/1"},{default:v(()=>e[0]||(e[0]=[y("Facile")])),_:1})]),n("button",null,[g(t,{to:"/QuizzImage/2"},{default:v(()=>e[1]||(e[1]=[y("Moyen")])),_:1})]),n("button",null,[g(t,{to:"/QuizzImage/3"},{default:v(()=>e[2]||(e[2]=[y("Dur")])),_:1})])])):(s(),o("div",C,[e[5]||(e[5]=n("h3",null,"Modified Image",-1)),i.value!==null?(s(),o("div",N,[n("p",null,"Image ID: "+h(i.value),1),n("figure",{id:"gallery-"+i.value},null,8,V)])):(s(),o("div",j,e[4]||(e[4]=[n("p",null,"Loading image...",-1)])))])),n("div",null,[p.value.length>0?(s(),o("div",T,[e[6]||(e[6]=n("h4",null,"Images",-1)),n("div",U,[(s(!0),o(w,null,$(p.value,l=>(s(),o("div",{key:l.id,class:"similar-image"},[g(t,{to:{name:"Result",params:{id:l.id===m.value?0:1}}},{default:v(()=>[g(x,{id:l.id},null,8,["id"])]),_:2},1032,["to"]),n("p",null,h(l.name),1)]))),128))])])):S("",!0)])],64)}}});export{G as default};
