import{d as V,r as o,i as z,j as $,c as a,h,a as t,u as p,w as k,v as C,F as d,b as f,t as E,o as s,_ as b}from"./index-L29UmdU-.js";import{G as w}from"./Engine-CWbUsSrV.js";import{a as _}from"./http-api-C67Pb7Kz.js";const x={key:0},B=["value"],G=["src"],U=["value"],A=["src"],D={key:0},M=["src"],N={key:0},Q=["src","alt"],j=V({__name:"QuizzImage",setup(T){let u=o(null);const r=o(0),i=o(1),v=o([]);let m=o([]),I=o(!0);const g=o(null);z(()=>{F(),y()}),$(()=>{u.value!=null&&u.value.game.destroy(!0)});function F(){_.getImageList().then(n=>{v.value=n}).catch(n=>{console.log(n.message)})}function y(){_.getSimilarImages(i.value).then(n=>{m.value=n;const l=o([]);let e=0;m.value.forEach(c=>{e<3&&c.id!==r.value&&c.id!==i.value&&(l.value.push(c),e++)}),m.value=l.value,L()}).catch(n=>{console.log(n.message)})}function L(){_.getImageFlou(i.value).then(n=>{g.value=n.id}).catch(n=>{console.log("Erreur lors du chargement de l'image floue :",n.message)})}function S(){u.value!=null&&u.value.game.destroy(!0),I.value=!1,u.value=new w("gameId",r),u.value.initialise()}return(n,l)=>(s(),a(d,null,[p(I)?(s(),a("div",x,[t("div",null,[t("button",{onClick:S},"Start game !")]),t("div",null,[l[3]||(l[3]=t("h1",null,"Choose an hero",-1)),t("div",null,[k(t("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e)},[(s(!0),a(d,null,f(v.value,e=>(s(),a("option",{value:e.id,key:e.id},E(e.name),9,B))),128))],512),[[C,r.value]])]),t("img",{src:`/images/${r.value}`},null,8,G),l[4]||(l[4]=t("h1",null,"Choose an ennemi",-1)),t("div",null,[k(t("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),onChange:y},[(s(!0),a(d,null,f(v.value,e=>(s(),a("option",{value:e.id,key:e.id},E(e.name),9,U))),128))],544),[[C,i.value]])]),t("img",{src:`/images/${i.value}`},null,8,A),g.value!==null?(s(),a("div",D,[l[2]||(l[2]=t("h2",null,"Version floue de l'ennemi",-1)),t("img",{src:`http://localhost:8080/images/${g.value}`,alt:"Image floue"},null,8,M)])):h("",!0)]),t("div",null,[l[5]||(l[5]=t("h1",null,"And there is his team",-1)),p(m).length>0?(s(),a("div",N,[t("div",null,[(s(!0),a(d,null,f(p(m),e=>(s(),a("img",{key:e.id,src:`http://localhost:8080/images/${e.id}`,alt:e.name},null,8,Q))),128))])])):h("",!0)])])):h("",!0),l[6]||(l[6]=t("div",{id:"gameId"},null,-1))],64))}}),K=b(j,[["__scopeId","data-v-be296323"]]);export{K as default};
