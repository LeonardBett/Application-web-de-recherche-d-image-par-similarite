import{a as d}from"./http-api-C67Pb7Kz.js";import{_ as w}from"./Image.vue_vue_type_script_setup_true_lang-BUwIXbwy.js";import{d as k,r as c,g as F,k as L,i as x,c as r,a as l,t as v,h as E,F as f,b as M,l as h,m as S,n as B,o as i}from"./index-BoUJEtQR.js";const C={key:0},A=["id"],N={key:1},V={key:0},$={class:"similar-images-container"},j=k({__name:"QuizzImage",setup(z){const u=c([]),n=c(null),s=c([]),m=c(null),p=async()=>{try{if(u.value=await d.getImageList(),u.value.length>0){const a=Math.floor(Math.random()*u.value.length),e=u.value[a].id;n.value=e===0?1:e}}catch(a){console.error("Error fetching image list:",a)}},y=async a=>{try{s.value=await d.getSimilarImages(a),s.value=s.value.slice(0,3)}catch(e){console.error("Error fetching similar images:",e),s.value=[]}},I=async a=>{try{const e=await d.getImageFlou(a);m.value=e.id}catch(e){console.error("Error fetching flou image:",e)}},_=(a,e)=>{const t=document.getElementById(`gallery-${a}`);t&&(t.innerHTML=`<img src="/images/${e}/raw" style="width:300px;">`)};F(n,async a=>{a!==null?(await y(a),await I(a),m.value!==null&&_(a,m.value)):(s.value=[],m.value=null)});const g=L(()=>{if(!n.value)return[];const a=new Set([n.value,...s.value.map(t=>t.id)]);return Array.from(a).map(t=>u.value.find(o=>o.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return x(p),(a,e)=>{const t=B("router-link");return i(),r(f,null,[l("div",null,[e[1]||(e[1]=l("h3",null,"Random Image",-1)),n.value!==null?(i(),r("div",C,[l("p",null,"Image ID: "+v(n.value),1),l("figure",{id:"gallery-"+n.value},null,8,A)])):(i(),r("div",N,e[0]||(e[0]=[l("p",null,"Loading image...",-1)])))]),l("div",null,[g.value.length>0?(i(),r("div",V,[e[2]||(e[2]=l("h4",null,"Images",-1)),l("div",$,[(i(!0),r(f,null,M(g.value,o=>(i(),r("div",{key:o.id,class:"similar-image"},[h(t,{to:{name:"Result",params:{id:o.id===n.value?0:1}}},{default:S(()=>[h(w,{id:o.id},null,8,["id"])]),_:2},1032,["to"]),l("p",null,v(o.name),1)]))),128))])])):E("",!0)])],64)}}});export{j as default};
