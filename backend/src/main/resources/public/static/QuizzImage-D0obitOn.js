import{a as g}from"./http-api-NiqjV3eZ.js";import{_ as k}from"./Image.vue_vue_type_script_setup_true_lang-bRfe07x4.js";import{d as w,r as m,g as E,i as F,c as i,a as t,t as v,h as L,F as f,b as x,k as h,l as C,m as B,o as r}from"./index-C5hheXGJ.js";const M={key:0},R=["id"],S={key:1},D={key:0},N={class:"similar-images-container"},j=w({__name:"QuizzImage",setup(V){const u=m([]),s=m(null),n=m([]),c=m(null),p=async()=>{try{if(u.value=await g.getImageList(),u.value.length>0){const e=Math.floor(Math.random()*u.value.length),a=u.value[e].id;s.value=a===0?1:a}}catch(e){console.error("Error fetching image list:",e)}},_=async e=>{try{n.value=await g.getSimilarImages(e),n.value=n.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),n.value=[]}},y=async e=>{try{c.value=await g.getImageFlou(e),I(e,c.value)}catch(a){console.error("Error fetching flou image:",a)}},I=(e,a)=>{const o=new FileReader;o.readAsDataURL(a),o.onload=()=>{const l=document.getElementById("gallery-"+e);if(l&&o.result){l.innerHTML="";const d=document.createElement("img");d.setAttribute("src",o.result),d.style.width="300px",l.appendChild(d)}}};return E(s,async e=>{e!==null?(await _(e),await y(e)):(n.value=[],c.value=null)}),F(p),(e,a)=>{const o=B("router-link");return r(),i(f,null,[t("div",null,[a[1]||(a[1]=t("h3",null,"Random Image",-1)),s.value!==null?(r(),i("div",M,[t("p",null,"Image ID: "+v(s.value),1),t("figure",{id:"gallery-"+s.value},null,8,R)])):(r(),i("div",S,a[0]||(a[0]=[t("p",null,"Loading image...",-1)])))]),t("div",null,[n.value.length>0?(r(),i("div",D,[a[2]||(a[2]=t("h4",null,"Images Similaires",-1)),t("div",N,[(r(!0),i(f,null,x(n.value,l=>(r(),i("div",{key:l.id,class:"similar-image"},[h(o,{to:{name:"Result",params:{id:l.id===s.value?0:1}}},{default:C(()=>[h(k,{id:l.id},null,8,["id"])]),_:2},1032,["to"]),t("p",null,v(l.name),1)]))),128))])])):L("",!0)])],64)}}});export{j as default};
