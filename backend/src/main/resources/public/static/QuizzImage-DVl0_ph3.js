import{a as d}from"./http-api-NiqjV3eZ.js";import{_ as I}from"./Image.vue_vue_type_script_setup_true_lang-D_18i6MD.js";import{d as k,r as m,g as w,i as F,c as o,a as t,t as g,h as L,F as v,b as x,k as f,l as E,m as B,o as i}from"./index-Cn0stBTC.js";const C={key:0},M=["id"],R={key:1},S={key:0},D={class:"similar-images-container"},b=k({__name:"QuizzImage",setup(N){const u=m([]),s=m(null),l=m([]),c=m(null),h=async()=>{try{if(u.value=await d.getImageList(),u.value.length>0){const e=Math.floor(Math.random()*u.value.length),a=u.value[e].id;s.value=a===0?1:a}}catch(e){console.error("Error fetching image list:",e)}},_=async e=>{try{l.value=await d.getSimilarImages(e),l.value=l.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),l.value=[]}},p=async e=>{try{c.value=await d.getImageFlou(e),y(e,c.value)}catch(a){console.error("Error fetching flou image:",a)}},y=(e,a)=>{const r=new FileReader;r.onload=()=>{const n=document.getElementById(`gallery-${e}`);n&&(n.innerHTML=`<img src="${r.result}" style="width:300px;">`)},r.readAsDataURL(a)};return w(s,async e=>{e!==null?(await _(e),await p(e)):(l.value=[],c.value=null)}),F(h),(e,a)=>{const r=B("router-link");return i(),o(v,null,[t("div",null,[a[1]||(a[1]=t("h3",null,"Random Image",-1)),s.value!==null?(i(),o("div",C,[t("p",null,"Image ID: "+g(s.value),1),t("figure",{id:"gallery-"+s.value},null,8,M)])):(i(),o("div",R,a[0]||(a[0]=[t("p",null,"Loading image...",-1)])))]),t("div",null,[l.value.length>0?(i(),o("div",S,[a[2]||(a[2]=t("h4",null,"Images Similaires",-1)),t("div",D,[(i(!0),o(v,null,x(l.value,n=>(i(),o("div",{key:n.id,class:"similar-image"},[f(r,{to:{name:"Result",params:{id:n.id===s.value?0:1}}},{default:E(()=>[f(I,{id:n.id},null,8,["id"])]),_:2},1032,["to"]),t("p",null,g(n.name),1)]))),128))])])):L("",!0)])],64)}}});export{b as default};
