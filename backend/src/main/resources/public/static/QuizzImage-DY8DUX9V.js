import{a as c}from"./http-api-DGFSZnvK.js";import{_ as g}from"./Image.vue_vue_type_script_setup_true_lang-CbIspYLA.js";import{d as I,r as m,g as y,l as _,j as k,c as r,a as s,h as w,i as v,t as u,F as L,b as S,o as i}from"./index-CGK-mzpM.js";const M={key:0},x={key:1},A={key:2},B={class:"similar-images-container"},C=I({__name:"QuizzImage",setup(E){const o=m([]),n=m(null),l=m([]),f=async()=>{try{if(o.value=await c.getImageList(),o.value.length>0){const e=Math.floor(Math.random()*o.value.length);n.value=o.value[e].id}}catch(e){console.error("Error fetching image list:",e)}},p=async e=>{try{l.value=await c.getSimilarImages(e),l.value=l.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),l.value=[]}};y(n,async e=>{e!==null?await p(e):l.value=[]});const d=_(()=>{if(!n.value)return[];const e=new Set([n.value,...l.value.map(t=>t.id)]);return Array.from(e).map(t=>o.value.find(h=>h.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return k(f),(e,a)=>(i(),r("div",null,[a[2]||(a[2]=s("h3",null,"Random Image",-1)),n.value!==null?(i(),r("div",M,[s("p",null,"Image ID: "+u(n.value),1),v(g,{id:n.value},null,8,["id"])])):(i(),r("div",x,a[0]||(a[0]=[s("p",null,"Loading image...",-1)]))),d.value.length>0?(i(),r("div",A,[a[1]||(a[1]=s("h4",null,"Images",-1)),s("div",B,[(i(!0),r(L,null,S(d.value,t=>(i(),r("div",{key:t.id,class:"similar-image"},[v(g,{id:t.id},null,8,["id"]),s("p",null,u(t.id),1),s("p",null,u(t.name),1)]))),128))])])):w("",!0)]))}});export{C as default};
