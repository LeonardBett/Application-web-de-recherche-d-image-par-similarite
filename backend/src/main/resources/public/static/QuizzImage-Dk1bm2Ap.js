import{a as d}from"./http-api-DGFSZnvK.js";import{_ as p}from"./Image.vue_vue_type_script_setup_true_lang-By1nkVEP.js";import{d as h,r as m,g as y,l as I,j as _,c as i,a as n,F as k,b as w,i as L,t as c,o as l}from"./index-BrjgTcXm.js";const S={key:0},M={class:"similar-images-container"},x={key:1},F=h({__name:"QuizzImage",setup(A){const r=m([]),o=m(null),t=m([]),g=async()=>{try{if(r.value=await d.getImageList(),r.value.length>0){const a=Math.floor(Math.random()*r.value.length);o.value=r.value[a].id}}catch(a){console.error("Error fetching image list:",a)}},v=async a=>{try{t.value=await d.getSimilarImages(a),t.value=t.value.slice(0,3)}catch(e){console.error("Error fetching similar images:",e),t.value=[]}};y(o,async a=>{a!==null?await v(a):t.value=[]});const u=I(()=>{if(!o.value)return[];const a=new Set([o.value,...t.value.map(s=>s.id)]);return Array.from(a).map(s=>r.value.find(f=>f.id===s)||{id:s,name:"Unknown"}).sort(()=>Math.random()-.5)});return _(g),(a,e)=>(l(),i("div",null,[e[2]||(e[2]=n("h3",null,"Random Image",-1)),u.value.length>0?(l(),i("div",S,[e[0]||(e[0]=n("h4",null,"Images",-1)),n("div",M,[(l(!0),i(k,null,w(u.value,s=>(l(),i("div",{key:s.id,class:"similar-image"},[L(p,{id:s.id},null,8,["id"]),n("p",null,c(s.id),1),n("p",null,c(s.name),1)]))),128))])])):(l(),i("div",x,e[1]||(e[1]=[n("p",null,"Loading images...",-1)])))]))}});export{F as default};
