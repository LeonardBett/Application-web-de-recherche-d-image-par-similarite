import{a as f}from"./http-api-XlQ5B82Y.js";import{_ as A}from"./Image.vue_vue_type_script_setup_true_lang-Ck0E99S3.js";import{d as B,r as c,g as D,k as Q,i as R,c as o,h,a as l,l as g,m as v,n as S,t as w,F as _,b as $,o as r,p as y}from"./index-CkRustRD.js";const b={key:0},C={key:0},N=["id"],V={key:1},j={key:0},T={class:"similar-images-container"},q=B({__name:"QuizzImage",props:{id:{}},setup(k){const u=c([]),m=c(null),s=c([]),d=c(null),i=c(null),I=k,M=async()=>{try{if(u.value=await f.getImageList(),u.value.length>0){const a=Math.floor(Math.random()*u.value.length),e=u.value[a].id;m.value=e===0?1:e}}catch(a){console.error("Error fetching image list:",a)}},z=async a=>{try{s.value=await f.getSimilarImages(a),s.value=s.value.slice(0,3)}catch(e){console.error("Error fetching similar images:",e),s.value=[]}},L=async a=>{try{d.value=await f.getImageModif(a,1),i.value=a,x(a,d.value)}catch(e){console.error("Error fetching flou image:",e)}},E=(a,e)=>{const t=new FileReader;t.onload=()=>{const n=document.getElementById(`gallery-${a}`);n&&(n.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)},F=async a=>{try{d.value=await f.getImageModif(a,2),i.value=a,E(a,d.value)}catch(e){console.error("Error fetching zoom image:",e)}},x=(a,e)=>{const t=new FileReader;t.onload=()=>{const n=document.getElementById(`gallery-${a}`);n&&(n.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)};D(m,async a=>{a!==null?(await z(a),I.id==1?await L(a):I.id==2&&await F(a)):(s.value=[],d.value=null,i.value=null)});const p=Q(()=>{if(!m.value)return[];const a=new Set([m.value,...s.value.map(t=>t.id)]);return Array.from(a).map(t=>u.value.find(n=>n.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return R(M),(a,e)=>{const t=S("router-link");return r(),o(_,null,[a.id===0?(r(),o("div",b,[e[3]||(e[3]=l("p",null,"Quel niveau va tu choisir cher joueur ?",-1)),l("button",null,[g(t,{to:"/QuizzImage/1"},{default:v(()=>e[0]||(e[0]=[y("Facile")])),_:1})]),l("button",null,[g(t,{to:"/QuizzImage/2"},{default:v(()=>e[1]||(e[1]=[y("Moyen")])),_:1})]),l("button",null,[g(t,{to:"/QuizzImage/3"},{default:v(()=>e[2]||(e[2]=[y("Dur")])),_:1})])])):h("",!0),l("div",null,[e[5]||(e[5]=l("h3",null,"Modified Image",-1)),i.value!==null?(r(),o("div",C,[l("p",null,"Image ID: "+w(i.value),1),l("figure",{id:"gallery-"+i.value},null,8,N)])):(r(),o("div",V,e[4]||(e[4]=[l("p",null,"Loading image...",-1)])))]),l("div",null,[p.value.length>0?(r(),o("div",j,[e[6]||(e[6]=l("h4",null,"Images",-1)),l("div",T,[(r(!0),o(_,null,$(p.value,n=>(r(),o("div",{key:n.id,class:"similar-image"},[g(t,{to:{name:"Result",params:{id:n.id===m.value?0:1}}},{default:v(()=>[g(A,{id:n.id},null,8,["id"])]),_:2},1032,["to"]),l("p",null,w(n.name),1)]))),128))])])):h("",!0)])],64)}}});export{q as default};
