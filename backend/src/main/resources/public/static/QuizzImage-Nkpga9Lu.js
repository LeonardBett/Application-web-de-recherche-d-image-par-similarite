import{a as v}from"./http-api-XlQ5B82Y.js";import{_ as L}from"./Image.vue_vue_type_script_setup_true_lang-CIdYBx9w.js";import{d as b,r as m,g as x,k as E,i as Q,c as o,a as n,l as g,m as c,n as S,t as I,h as A,F as B,b as C,o as i,p as f}from"./index-DOpsBblC.js";const D={key:0},F={key:1},N={key:0},V=["id"],$={key:1},R={key:0},j={class:"similar-images-container"},q=b({__name:"QuizzImage",props:{id:{}},setup(h){const r=m([]),u=m(null),s=m([]),p=m(null),d=m(null),_=h,k=async()=>{try{if(r.value=await v.getImageList(),r.value.length>0){const a=Math.floor(Math.random()*r.value.length),e=r.value[a].id;u.value=e===0?1:e}}catch(a){console.error("Error fetching image list:",a)}},w=async a=>{try{s.value=await v.getSimilarImages(a),s.value=s.value.slice(0,3)}catch(e){console.error("Error fetching similar images:",e),s.value=[]}},M=(a,e)=>{const t=new FileReader;t.onload=()=>{const l=document.getElementById(`gallery-${a}`);l&&(l.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(e)},z=async(a,e)=>{try{const t=await v.getImageModif(a,e);p.value=t,d.value=a,M(a,t)}catch(t){console.error(`Error fetching modified image (type=${e}):`,t)}};x(u,async a=>{a!==null?(await w(a),await z(a,_.id)):(s.value=[],p.value=null,d.value=null)});const y=E(()=>{if(!u.value)return[];const a=new Set([u.value,...s.value.map(t=>t.id)]);return Array.from(a).map(t=>r.value.find(l=>l.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return Q(k),(a,e)=>{const t=S("router-link");return a.id===0?(i(),o("div",D,[e[3]||(e[3]=n("p",null,"Quel niveau va tu choisir cher joueur ?",-1)),n("button",null,[g(t,{to:"/QuizzImage/1"},{default:c(()=>e[0]||(e[0]=[f("Facile")])),_:1})]),n("button",null,[g(t,{to:"/QuizzImage/2"},{default:c(()=>e[1]||(e[1]=[f("Moyen")])),_:1})]),n("button",null,[g(t,{to:"/QuizzImage/3"},{default:c(()=>e[2]||(e[2]=[f("Dur")])),_:1})])])):(i(),o("div",F,[n("div",null,[e[5]||(e[5]=n("h3",null,"Modified Image",-1)),d.value!==null?(i(),o("div",N,[n("p",null,"Image ID: "+I(d.value),1),n("figure",{id:"gallery-"+d.value},null,8,V)])):(i(),o("div",$,e[4]||(e[4]=[n("p",null,"Loading image...",-1)])))]),n("div",null,[y.value.length>0?(i(),o("div",R,[e[6]||(e[6]=n("h4",null,"Images",-1)),n("div",j,[(i(!0),o(B,null,C(y.value,l=>(i(),o("div",{key:l.id,class:"similar-image"},[g(t,{to:{name:"Result",params:{id:l.id===u.value?0:1}}},{default:c(()=>[g(L,{id:l.id},null,8,["id"])]),_:2},1032,["to"]),n("p",null,I(l.name),1)]))),128))])])):A("",!0)])]))}}});export{q as default};
