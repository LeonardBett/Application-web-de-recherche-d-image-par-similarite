import{a as d}from"./http-api-DGFSZnvK.js";import{_}from"./Image.vue_vue_type_script_setup_true_lang-BLX8t4wB.js";import{d as I,r as u,g as y,k,i as w,c as r,a as t,t as g,h as L,F as v,b as S,l as f,m as x,n as C,o as i}from"./index-Bl3s9NAH.js";const M={key:0},A=["src"],B={key:1},E={key:0},N={class:"similar-images-container"},Q=I({__name:"QuizzImage",setup(V){const m=u([]),n=u(null),s=u([]),p=async()=>{try{if(m.value=await d.getImageList(),m.value.length>0){const e=Math.floor(Math.random()*m.value.length);n.value=m.value[e].id}}catch(e){console.error("Error fetching image list:",e)}},h=async e=>{try{s.value=await d.getSimilarImages(e),s.value=s.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),s.value=[]}};y(n,async e=>{e!==null?await h(e):s.value=[]});const c=k(()=>{if(!n.value)return[];const e=new Set([n.value,...s.value.map(l=>l.id)]);return Array.from(e).map(l=>m.value.find(o=>o.id===l)||{id:l,name:"Unknown"}).sort(()=>Math.random()-.5)});return w(p),(e,a)=>{const l=C("router-link");return i(),r(v,null,[t("div",null,[a[1]||(a[1]=t("h3",null,"Random Image",-1)),n.value!==null?(i(),r("div",M,[t("p",null,"Image ID: "+g(n.value),1),t("img",{src:`http://localhost:8080/images/${n.value}`},null,8,A)])):(i(),r("div",B,a[0]||(a[0]=[t("p",null,"Loading image...",-1)])))]),t("div",null,[c.value.length>0?(i(),r("div",E,[a[2]||(a[2]=t("h4",null,"Images",-1)),t("div",N,[(i(!0),r(v,null,S(c.value,o=>(i(),r("div",{key:o.id,class:"similar-image"},[f(l,{to:{name:"ImageQuest",params:{id:o.id===n.value?0:1}}},{default:x(()=>[f(_,{id:o.id},null,8,["id"])]),_:2},1032,["to"]),t("p",null,g(o.name),1)]))),128))])])):L("",!0)])],64)}}});export{Q as default};
