import{a as d}from"./http-api-DGFSZnvK.js";import{_ as c}from"./Image.vue_vue_type_script_setup_true_lang-Cxy3TDtS.js";import{d as y,r as m,g as _,l as k,j as w,c as r,a as n,i as g,t as v,h as L,F as f,b as S,o as i}from"./index-VKZetUv7.js";const M={key:0},x={key:1},A={key:0},B={class:"similar-images-container"},C=y({__name:"QuizzImage",setup(E){const o=m([]),s=m(null),l=m([]),p=async()=>{try{if(o.value=await d.getImageList(),o.value.length>0){const e=Math.floor(Math.random()*o.value.length);s.value=o.value[e].id}}catch(e){console.error("Error fetching image list:",e)}},h=async e=>{try{l.value=await d.getSimilarImages(e),l.value=l.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),l.value=[]}};_(s,async e=>{e!==null?await h(e):l.value=[]});const u=k(()=>{if(!s.value)return[];const e=new Set([s.value,...l.value.map(t=>t.id)]);return Array.from(e).map(t=>o.value.find(I=>I.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return w(p),(e,a)=>(i(),r(f,null,[n("div",null,[a[1]||(a[1]=n("h3",null,"Random Image",-1)),s.value!==null?(i(),r("div",M,[n("p",null,"Image ID: "+v(s.value),1),g(c,{id:s.value},null,8,["id"])])):(i(),r("div",x,a[0]||(a[0]=[n("p",null,"Loading image...",-1)])))]),n("div",null,[u.value.length>0?(i(),r("div",A,[a[2]||(a[2]=n("h4",null,"Images",-1)),n("div",B,[(i(!0),r(f,null,S(u.value,t=>(i(),r("div",{key:t.id,class:"similar-image"},[g(c,{id:t.id},null,8,["id"]),n("p",null,v(t.name),1)]))),128))])])):L("",!0)])],64))}});export{C as default};
